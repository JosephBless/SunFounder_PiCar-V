

<!DOCTYPE html>
<html class="writer-html5" lang="ja" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>File Analysis &mdash; SunFounder PiCar-V Car Kit  ドキュメント</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://ezblock.cc/readDocFile/topHead.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
        <script src="https://ezblock.cc/readDocFile/topHead.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="next" title="Advanced" href="advanced.html" />
    <link rel="prev" title="ball_tracker" href="ball_tracker.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SunFounder PiCar-V Car Kit
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="components_list.html">Components List</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_the_car.html">Building the Car</a></li>
<li class="toctree-l1"><a class="reference internal" href="circuits_building.html">Circuits Building</a></li>
<li class="toctree-l1"><a class="reference internal" href="get_started_with_raspberry_pi.html">Get Started with Raspberry Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="servo_configuration.html">Servo Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="continue_to_assemble.html">Continue to Assemble</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="getting_on_the_road.html">Getting on the Road!</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="remote_control.html">Remote Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="ball_tracker.html">ball_tracker</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">File Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#server-code">Server Code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html">Advanced</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SunFounder PiCar-V Car Kit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="getting_on_the_road.html">Getting on the Road!</a> &raquo;</li>
        
      <li>File Analysis</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/file_analysis.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="file-analysis">
<h1>File Analysis<a class="headerlink" href="#file-analysis" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>There are two folders under /home/pi: <strong>SunFounder_PiCar</strong> for
controlling motors and steering and <strong>SunFounder_PiCar-V</strong> for pan/tilt
and wireless control. Here look into the code of PiCar-V.</p>
<p>Since too many contents and instructions are involved in the code, we
will not cover every detail. For more knowledge about Python 2, Python
3, Django, HTML, and CSS in the programs, you can visit related websites
or buy books to learn by yourself. In the following part, we will go
through the overall structure and the process in brief.</p>
<p>First, let’s check the files in the code folder:</p>
<a class="reference internal image-reference" href="_images/image119.jpeg"><img alt="_images/image119.jpeg" class="align-center" src="_images/image119.jpeg" style="width: 1.83681in; height: 3.24236in;" /></a>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.git</span></code> is a hidden directory to store all the information of a Git
repository; it's generated automatically after you create the
repository.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Ball_track</span></code> is used to let the car follow the red ball.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">datasheet</span></code> stores the manual of some chips used in the hardware
modules.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mjpg-streamer</span></code> is an open source streaming media library, through
which the data of the camera is transferred.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Remote_control</span></code> is to store the code of the web server; it controls
the motor and servo of the car based on the API request.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> records the requests of file types to be ignored when the
Github repository is synchronized.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_init_.py</span></code> is automatically generated when you create a project which
is a standard necessary document of python package, just leave it
there.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i2cHelper.py</span></code> is a Python script written by Python 2 to configure and
detect the I2C connection.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">install_dependencies</span></code>, an executable bash script for simple
installation and environment configuration.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LICENSE</span></code>, as the name suggests, is a text file of GNU V2 license.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> and <code class="docutils literal notranslate"><span class="pre">show</span></code> record some information normally for statement and
prompts.</p></li>
</ul>
<div class="section" id="server-code">
<h2>Server Code<a class="headerlink" href="#server-code" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The server code is based on Django 1.10 (adapt to the latest release if
needed). If you are interested in this, you can visit the Django website
<a class="reference external" href="https://www.djangoproject.com/">https://www.djangoproject.com/</a>. Here we will just learn how the web
server works.</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>The code may be updated irregularly on Github to fix bugs and release
some functions update. So the code here is the initial version. You can
view the updates in the Github repository at:</p>
<p><a class="reference external" href="https://github.com/sunfounder/SunFounder_PiCar-V/tree/V3.0">https://github.com/sunfounder/SunFounder_PiCar-V/tree/V3.0</a></p>
</div>
<p>Open the code directory and check the file by <strong>ls</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pi@raspberry:~ $ cd SunFounder_PiCar-V/
pi@raspberry:~/SunFounder_PiCar-V $ ls
datasheet   install_dependencies   mjpg-streamer   remote_control
client          i2cHelper.py       LICENSE         README.md show
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">remote_control</span></code> is the main code directory of the web server. Open the
code directory by cd <code class="docutils literal notranslate"><span class="pre">remote_control</span></code>, and check the file by ls:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pi@raspberry:~/SunFounder_PiCar-V $ cd remote_control
pi@raspberry:~/SunFounder_PiCar-V/remote_control $ ls
db.sqlite3   manage.py   remote_control   start static
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">db.sqlite3</span></code> is generated when you create a Django project.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">manage.py</span></code> is the main program of the Django project and is generated
when the project is created. It normally does not need to be
modified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remote_control</span></code> includes the main code files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start</span></code> is a small script written to run <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">python</span> <span class="pre">manage.py</span>
<span class="pre">runserver</span> <span class="pre">0.0.0.0:8000</span></code>, and servo installation with attribute <code class="docutils literal notranslate"><span class="pre">install</span></code>
just for convenience.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">static</span></code> is to store some static pictures on the web.</p></li>
</ul>
<p>The Django web server normally runs <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">runserver</span></code> to
start. The address 0.0.0.0:8000 means the listening address covers all
the addresses on the LAN, and the port number is 8000. Here we will just
focus on the code in <code class="docutils literal notranslate"><span class="pre">remote_control</span></code> folder. Go to the directory via <code class="docutils literal notranslate"><span class="pre">cd</span>
<span class="pre">remote_control</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pi@raspberry:~/SunFounder_PiCar-V/remote_control $ cd remote_control
pi@raspberry:~/SunFounder_PiCar-V/remote_control/remote_control $ ls
driver   \__init__.py   settings.py   templates urls.py   views.py   wsgi.py
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">driver</span></code> stores the drivers of the car.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> is automatically generated when you create a Django
project which is a standard necessary document of python package,
just leave it there.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">settings.py</span></code> is automatically generated and stores the related
settings.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">templates</span></code> is a Django app for storing the webs in the html format.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">urls.py</span></code> is generated automatically to configure the URL to associate
with the code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">views.py</span></code> is the code for page control which is associated by the URL.
It calls the templates to show the page and the driver to control the
car.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wsgi.py</span></code> is generated automatically and does not need changes. For
more, please visit the official website of Django.</p></li>
</ul>
<p>So here is how the code works: Run the main program <code class="docutils literal notranslate"><span class="pre">manage.py</span></code> which will
be associated with <code class="docutils literal notranslate"><span class="pre">urls.py</span></code> automatically, to respond to the URL. When
you run the web browser like the Chrome to visit
<code class="docutils literal notranslate"><span class="pre">http://&lt;rpi_ip_address&gt;:&lt;port&gt;</span></code> or visit the configured API via the
client, the <code class="docutils literal notranslate"><span class="pre">manage.py</span></code> will turn to <code class="docutils literal notranslate"><span class="pre">views.py</span></code> due to the association of
the <code class="docutils literal notranslate"><span class="pre">urls.py.</span></code> Then the <code class="docutils literal notranslate"><span class="pre">views.py</span></code> processes this and returns the
templates to the browser. In addition, it will call the <code class="docutils literal notranslate"><span class="pre">driver</span></code> package
on the basis of the parameters set in the browser to control the car.</p>
<p>Now open the folder <code class="docutils literal notranslate"><span class="pre">driver</span></code> and check:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pi@raspberry:~/SunFounder_PiCar-V/remote_control/remote_control $ cd driver/
pi@raspberry:~/SunFounder_PiCar-V/remote_control/remote_control/driver $ ls
camera.py   config   \__init__.py   stream.py
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">driver</span></code> folder mainly includes the driver modules for controlling the
pan and tilt and camera streamer.</p>
<p><code class="docutils literal notranslate"><span class="pre">camera.py</span></code> for controlling the pan-and-tilt.</p>
<p><code class="docutils literal notranslate"><span class="pre">config</span></code> stores the calibration data.</p>
<p><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> is the essential file of the package and you can just leave it alone.</p>
<p><code class="docutils literal notranslate"><span class="pre">stream.py</span></code> is a video streaming service based on the MJPG-streamer.</p>
<p>Exit and open the folder <code class="docutils literal notranslate"><span class="pre">templates</span></code> to view:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pi@raspberry:~/SunFounder_PiCar-V/remote_control/remote_control/driver $ cd ../
pi@raspberry:~/SunFounder_PiCar-V/remote_control/remote_control $ cd templates/
admin.py   \__init__.py   models.py   tests.py
apps.py    migrations     templates   views.py
</pre></div>
</div>
<p>This folder is created by the <code class="docutils literal notranslate"><span class="pre">manage.py</span> <span class="pre">startapp</span></code> just for calling the
templates conveniently. Therefore, the files have not been changed
except for the <code class="docutils literal notranslate"><span class="pre">templates</span></code>. Open the <code class="docutils literal notranslate"><span class="pre">templates</span></code> again:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pi@raspberry:~/SunFounder_PiCar-V/remote_control/remote_control/templates $ cd templates
pi@raspberry:~/SunFounder_PiCar-V/remote_control/remote_control/templates/templates $ ls
base.html   cali.html   run.html
</pre></div>
</div>
<p>There are three HTML files that also consist of layers. The low level
<code class="docutils literal notranslate"><span class="pre">base.html</span></code> stores contents contained on each page such as the <code class="docutils literal notranslate"><span class="pre">&lt;head&gt;</span></code> of
HTML, the overall layout, and contents of the home page by default. The
surface layer: <code class="docutils literal notranslate"><span class="pre">cali.html</span></code> for calibration and <code class="docutils literal notranslate"><span class="pre">run.html</span></code> to control the
car.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="advanced.html" class="btn btn-neutral float-right" title="Advanced" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="ball_tracker.html" class="btn btn-neutral float-left" title="ball_tracker" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, SunFounder.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>